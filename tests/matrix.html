<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js-analysis - Matrix - Test</title>
    <script src="../sources/js/vector.js"></script>
    <script src="../sources/js/vectorException.js"></script>
    <script src="../sources/js/matrix.js"></script>
    <script src="../sources/js/matrixException.js"></script>
    <script src="../sources/js/test.js"></script>
</head>
<body>
    <script>


        /* Matrix: start given rows are not an array */
        new Test(
            Matrix.ERROR_ROWS_IS_NO_ARRAY,
            function () {
                var matrix = new Matrix('test');
                console.log(matrix.array);
                return false;
            }
        );

        /* Matrix: start given rows are not higher than 0 */
        new Test(
            Matrix.ERROR_ROWS_COUNT_ARRAY_WRONG,
            function () {
                var matrix = new Matrix([]);
                console.log(matrix.array);
                return false;
            }
        );

        /* Matrix: given cols are not an array */
        new Test(
            Matrix.ERROR_COLS_IS_NO_ARRAY,
            function () {
                var matrix = new Matrix(['string']);
                console.log(matrix.array);
                return false;
            }
        );

        /* Matrix: given cols are not an array */
        new Test(
            Matrix.ERROR_COLS_COUNT_ARRAY_WRONG,
            function () {
                var matrix = new Matrix([[], []]);
                console.log(matrix.array);
                return false;
            }
        );

        /* Matrix: start wrong col number test */
        new Test(
            Matrix.ERROR_WRONG_COL_NUMBER,
            function () {
                var matrix = new Matrix([[1, 2], [2]]);
                console.log(matrix.array);
                return false;
            }
        );

        /* Matrix: start initial test */
        new Test(
            Matrix.SUCCESS_INITIALIZE_MATRIX,
            function () {
                var matrix = new Matrix([[1, 2, 3], [4, 5, 6]]);
                return (
                    matrix.getCell(0, 0) === 1 &&
                    matrix.getCell(0, 1) === 2 &&
                    matrix.getCell(0, 2) === 3 &&
                    matrix.getCell(1, 0) === 4 &&
                    matrix.getCell(1, 1) === 5 &&
                    matrix.getCell(1, 2) === 6 &&
                    matrix.numberCols === 3 &&
                    matrix.numberRows === 2
                );
            }
        );

        /* Matrix: start add test (wrong matrix type) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_TYPE,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = 1;
                /* this is not a matrix */

                matrix1.add(matrix2);

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start add test (wrong matrix dimension) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_DIMENSIONS,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4], [8, 10]]);
                /* this matrix has the wrong dimensions */

                matrix1.add(matrix2);

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start add test (correct - keep) */
        new Test(
            {config: Matrix.SUCCESS_ADDITION_TEST, mode: 'keep'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4, 6], [8, 10, 12]]);

                matrix1.add(matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 3 &&
                    matrix1.getCell(0, 1) === 6 &&
                    matrix1.getCell(0, 2) === 9 &&
                    matrix1.getCell(1, 0) === 12 &&
                    matrix1.getCell(1, 1) === 15 &&
                    matrix1.getCell(1, 2) === 18 &&
                    matrix1.numberCols === 3 &&
                    matrix1.numberRows === 2 &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 2 &&
                    matrix2.getCell(0, 1) === 4 &&
                    matrix2.getCell(0, 2) === 6 &&
                    matrix2.getCell(1, 0) === 8 &&
                    matrix2.getCell(1, 1) === 10 &&
                    matrix2.getCell(1, 2) === 12 &&
                    matrix2.numberCols === 3 &&
                    matrix2.numberRows === 2
                );
            }
        );

        /* Matrix: start add test (correct - copy) */
        new Test(
            {config: Matrix.SUCCESS_ADDITION_TEST, mode: 'copy'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4, 6], [8, 10, 12]]);

                var matrix3 = matrix1.add(true, matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 1 &&
                    matrix1.getCell(0, 1) === 2 &&
                    matrix1.getCell(0, 2) === 3 &&
                    matrix1.getCell(1, 0) === 4 &&
                    matrix1.getCell(1, 1) === 5 &&
                    matrix1.getCell(1, 2) === 6 &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 2 &&
                    matrix2.getCell(0, 1) === 4 &&
                    matrix2.getCell(0, 2) === 6 &&
                    matrix2.getCell(1, 0) === 8 &&
                    matrix2.getCell(1, 1) === 10 &&
                    matrix2.getCell(1, 2) === 12 &&
                    matrix3 instanceof Matrix &&
                    matrix3.getCell(0, 0) === 3 &&
                    matrix3.getCell(0, 1) === 6 &&
                    matrix3.getCell(0, 2) === 9 &&
                    matrix3.getCell(1, 0) === 12 &&
                    matrix3.getCell(1, 1) === 15 &&
                    matrix3.getCell(1, 2) === 18 &&
                    matrix3.numberCols === matrix1.numberCols &&
                    matrix3.numberRows === matrix1.numberRows
                );
            }
        );

        /* Matrix: start subtraction test (wrong matrix type) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_TYPE,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = 1;
                /* this is not a matrix */

                matrix1.subtract(matrix2);

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start subtraction test (wrong matrix dimension) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_DIMENSIONS,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4], [8, 10]]);
                /* this matrix has the wrong dimensions */

                matrix1.subtract(matrix2);

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start subtraction test (correct - keep) */
        new Test(
            {config: Matrix.SUCCESS_SUBTRACTION_TEST, mode: 'keep'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4, 6], [8, 10, 12]]);

                matrix1.subtract(matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === -1 &&
                    matrix1.getCell(0, 1) === -2 &&
                    matrix1.getCell(0, 2) === -3 &&
                    matrix1.getCell(1, 0) === -4 &&
                    matrix1.getCell(1, 1) === -5 &&
                    matrix1.getCell(1, 2) === -6 &&
                    matrix1.numberCols === 3 &&
                    matrix1.numberRows === 2 &&
                    matrix2.getCell(0, 0) === 2 &&
                    matrix2.getCell(0, 1) === 4 &&
                    matrix2.getCell(0, 2) === 6 &&
                    matrix2.getCell(1, 0) === 8 &&
                    matrix2.getCell(1, 1) === 10 &&
                    matrix2.getCell(1, 2) === 12 &&
                    matrix2.numberCols === 3 &&
                    matrix2.numberRows === 2
                );
            }
        );

        /* Matrix: start subtraction test (correct - copy) */
        new Test(
            {config: Matrix.SUCCESS_SUBTRACTION_TEST, mode: 'copy'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4, 6], [8, 10, 12]]);

                var matrix3 = matrix1.subtract(true, matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 1 &&
                    matrix1.getCell(0, 1) === 2 &&
                    matrix1.getCell(0, 2) === 3 &&
                    matrix1.getCell(1, 0) === 4 &&
                    matrix1.getCell(1, 1) === 5 &&
                    matrix1.getCell(1, 2) === 6 &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 2 &&
                    matrix2.getCell(0, 1) === 4 &&
                    matrix2.getCell(0, 2) === 6 &&
                    matrix2.getCell(1, 0) === 8 &&
                    matrix2.getCell(1, 1) === 10 &&
                    matrix2.getCell(1, 2) === 12 &&
                    matrix3 instanceof Matrix &&
                    matrix3.getCell(0, 0) === -1 &&
                    matrix3.getCell(0, 1) === -2 &&
                    matrix3.getCell(0, 2) === -3 &&
                    matrix3.getCell(1, 0) === -4 &&
                    matrix3.getCell(1, 1) === -5 &&
                    matrix3.getCell(1, 2) === -6 &&
                    matrix3.numberCols === matrix1.numberCols &&
                    matrix3.numberRows === matrix1.numberRows
                );
            }
        );

        /* Matrix: start scalar multiplication test (no scalar) */
        new Test(
            Matrix.ERROR_NO_SCALAR,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[2, 4, 6], [8, 10, 12]]);

                matrix1.scalarMultiplication(matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 3 &&
                    matrix1.getCell(0, 1) === 6 &&
                    matrix1.getCell(0, 2) === 9 &&
                    matrix1.getCell(1, 0) === 12 &&
                    matrix1.getCell(1, 1) === 15 &&
                    matrix1.getCell(1, 2) === 18 &&
                    matrix1.numberCols === matrix1.numberCols &&
                    matrix1.numberRows === matrix1.numberRows
                );
            }
        );

        /* Matrix: start scalar multiplication test (keep) */
        new Test(
            {config: Matrix.SUCCESS_SCALAR_MULTIPLICATION_TEST, mode: 'keep'},
            function () {
                var matrix = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var scalar = 2.5;

                matrix.multiply(scalar);

                return (
                    matrix instanceof Matrix &&
                    matrix.getCell(0, 0) === 2.5 &&
                    matrix.getCell(0, 1) === 5 &&
                    matrix.getCell(0, 2) === 7.5 &&
                    matrix.getCell(1, 0) === 10 &&
                    matrix.getCell(1, 1) === 12.5 &&
                    matrix.getCell(1, 2) === 15 &&
                    matrix.numberCols === 3 &&
                    matrix.numberRows === 2 &&
                    scalar === 2.5
                );
            }
        );

        /* Matrix: start scalar multiplication test (copy) */
        new Test(
            {config: Matrix.SUCCESS_SCALAR_MULTIPLICATION_TEST, mode: 'copy'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var scalar = 2.5;

                var matrix2 = matrix1.multiply(true, scalar);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 1 &&
                    matrix1.getCell(0, 1) === 2 &&
                    matrix1.getCell(0, 2) === 3 &&
                    matrix1.getCell(1, 0) === 4 &&
                    matrix1.getCell(1, 1) === 5 &&
                    matrix1.getCell(1, 2) === 6 &&
                    matrix1.numberCols === matrix1.numberCols &&
                    matrix1.numberRows === matrix1.numberRows &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 2.5 &&
                    matrix2.getCell(0, 1) === 5 &&
                    matrix2.getCell(0, 2) === 7.5 &&
                    matrix2.getCell(1, 0) === 10 &&
                    matrix2.getCell(1, 1) === 12.5 &&
                    matrix2.getCell(1, 2) === 15 &&
                    matrix2.numberCols === matrix1.numberCols &&
                    matrix2.numberRows === matrix1.numberRows
                );
            }
        );

        /* Matrix: start matrix multiplication test (wrong matrix dimension) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_DIMENSIONS,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[1], [2]]);

                matrix1.multiply(matrix2);

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start matrix multiplication test (keep) */
        new Test(
            {config: Matrix.SUCCESS_MULTIPLICATION_MATRIX_TEST, mode: 'keep'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[1], [2], [3]]);

                matrix1.multiply(matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 14 &&
                    matrix1.getCell(1, 0) === 32 &&
                    matrix1.numberCols === 1 &&
                    matrix1.numberRows === 2 &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 1 &&
                    matrix2.getCell(1, 0) === 2 &&
                    matrix2.getCell(2, 0) === 3 &&
                    matrix2.numberCols === 1 &&
                    matrix2.numberRows === 3
                );
            }
        );

        /* Matrix: start matrix multiplication test (copy) */
        new Test(
            {config: Matrix.SUCCESS_MULTIPLICATION_MATRIX_TEST, mode: 'copy'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = new Matrix([[1], [2], [3]]);
                var matrix3 = matrix1.multiply(true, matrix2);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 1 &&
                    matrix1.getCell(0, 1) === 2 &&
                    matrix1.getCell(0, 2) === 3 &&
                    matrix1.getCell(1, 0) === 4 &&
                    matrix1.getCell(1, 1) === 5 &&
                    matrix1.getCell(1, 2) === 6 &&
                    matrix1.numberCols === 3 &&
                    matrix1.numberRows === 2 &&
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 1 &&
                    matrix2.getCell(1, 0) === 2 &&
                    matrix2.getCell(2, 0) === 3 &&
                    matrix2.numberCols === 1 &&
                    matrix2.numberRows === 3 &&
                    matrix3 instanceof Matrix &&
                    matrix3.getCell(0, 0) === 14 &&
                    matrix3.getCell(1, 0) === 32 &&
                    matrix3.numberCols === 1 &&
                    matrix3.numberRows === 2
                );
            }
        );

        /* Matrix: start vector multiplication test (keep) */
        new Test(
            {config: Matrix.SUCCESS_MULTIPLICATION_MATRIX_VECTOR_TEST, mode: 'keep'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var vector1 = new Vector([1, 2, 3]);

                matrix1.multiply(vector1);

                return (
                    matrix1 instanceof Matrix &&
                    matrix1.getCell(0, 0) === 14 &&
                    matrix1.getCell(1, 0) === 32 &&
                    matrix1.numberCols === 1 &&
                    matrix1.numberRows === 2
                );
            }
        );

        /* Matrix: start vector multiplication test (copy) */
        new Test(
            {config: Matrix.SUCCESS_MULTIPLICATION_MATRIX_VECTOR_TEST, mode: 'copy'},
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var vector1 = new Vector([1, 2, 3]);
                var vector2 = matrix1.multiply(true, vector1);

                return (
                    vector2 instanceof Vector &&
                    vector2.getElement(0) === 14 &&
                    vector2.getElement(1) === 32 &&
                    vector2.size === 2
                );
            }
        );

        /* Matrix: start transpose test */
        new Test(
            Matrix.SUCCESS_TRANSPOSE_TEST,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [4, 5, 6]]);
                var matrix2 = matrix1.transpose();

                return (
                    matrix2 instanceof Matrix &&
                    matrix2.getCell(0, 0) === 1 &&
                    matrix2.getCell(0, 1) === 4 &&
                    matrix2.getCell(1, 0) === 2 &&
                    matrix2.getCell(1, 1) === 5 &&
                    matrix2.getCell(2, 0) === 3 &&
                    matrix2.getCell(2, 1) === 6 &&
                    matrix2.numberCols === matrix1.numberRows &&
                    matrix2.numberRows === matrix1.numberCols
                );
            }
        );

        /* Matrix: start matrix determinant calculation test (wrong matrix dimension) */
        new Test(
            Matrix.ERROR_WRONG_MATRIX_DIMENSIONS_QUADRATIC,
            function () {
                var matrix = new Matrix([[1, 2, 3], [4, 5, 6]]);

                matrix.determinant();

                /* the method add should throw an exception */
                return false;
            }
        );

        /* Matrix: start matrix determinant calculation test */
        new Test(
            Matrix.SUCCESS_DETERMINANT_TEST,
            function () {
                var matrix = new Matrix([[1]]);
                var determinant = matrix.determinant();

                /* the method add should throw an exception */
                return determinant === 1;
            }
        );

        /* Matrix: start matrix determinant calculation test */
        new Test(
            Matrix.SUCCESS_DETERMINANT_TEST,
            function () {
                var matrix = new Matrix([[1, 1], [2, 3]]);
                var determinant = matrix.determinant();

                /* the method add should throw an exception */
                return determinant === 1;
            }
        );

        /* Matrix: start matrix determinant calculation test */
        new Test(
            Matrix.SUCCESS_DETERMINANT_TEST,
            function () {
                var matrix = new Matrix([[1, 2, 3, 4, 0], [5, 6, 7, 8, 7], [9, 1, 2, 3, 8], [4, 5, 9, 7, -1], [7, 8, -2, -5, -3]]);
                var determinant = matrix.determinant();

                /* the method add should throw an exception */
                return determinant === -8406;
            }
        );

        /* Matrix: start matrix inverse calculation test */
        new Test(
            Matrix.SUCCESS_DETERMINANT_TEST,
            function () {
                var matrix1 = new Matrix([[1, 2, 3], [-4, 5, -6], [-1, 0, 3]]);
                var matrix2 = matrix1.inverse();
                var precision = 5;

                return (
                    matrix2 instanceof Matrix &&
                    Math.round(precision * matrix2.getCell(0, 0)) === Math.round(precision * 5 / 22) &&
                    Math.round(precision * matrix2.getCell(0, 1)) === Math.round(precision * -1 / 11) &&
                    Math.round(precision * matrix2.getCell(0, 2)) === Math.round(precision * -9 / 22) &&
                    Math.round(precision * matrix2.getCell(1, 0)) === Math.round(precision * 3 / 11) &&
                    Math.round(precision * matrix2.getCell(1, 1)) === Math.round(precision * 1 / 11) &&
                    Math.round(precision * matrix2.getCell(1, 2)) === Math.round(precision * -1 / 11) &&
                    Math.round(precision * matrix2.getCell(2, 0)) === Math.round(precision * 5 / 66) &&
                    Math.round(precision * matrix2.getCell(2, 1)) === Math.round(precision * -1 / 33) &&
                    Math.round(precision * matrix2.getCell(2, 2)) === Math.round(precision * 13 / 66) &&
                    matrix2.numberCols === 3 &&
                    matrix2.numberRows === 3
                );
            }
        );

        /* TODO: add inverse test */


        /* prints out the test result */
        Test.resultTest();

    </script>
</body>
</html>